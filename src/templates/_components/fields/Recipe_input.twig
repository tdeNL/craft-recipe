{#
/**
 * Recipe plugin for Craft CMS 3.x
 *
 * Recipe Field Input
 *
 * @author    nystudio107
 * @copyright Copyright (c) 2017 nystudio107
 * @link      https://nystudio107.com
 * @package   Recipe
 * @since     1.0.0
 */
#}

{% import "_includes/forms" as forms %}

{% set baseAssetsUrl = view.getAssetManager().getPublishedUrl('@nystudio107/recipe/assetbundles/recipefield/dist', true) %}

<div id="{{ id }}" class="recipe-field">
    <div class="pane">
        <nav class="customtabs">
            <ul>
                <li><a id="{{ id ~ "tabs-recipe" }}" class="tab sel" href="#{{ prefix ~ id ~ 'tab-recipe' }}"  tabindex="0"><img class="recipe-field-icon" src="{{ baseAssetsUrl ~ '/img/Recipe-icon.svg' }}" width="16px" height="auto" /><span class="recipe-field-title">Recipe</span></a></li>
                <li><a id="{{ id ~ "tabs-health" }}" class="tab" href="#{{ prefix ~ id ~ 'tab-health' }}" tabindex="0"><img class="recipe-field-icon" src="{{ baseAssetsUrl ~ '/img/Healthy-icon.svg' }}" width="16px" height="auto" /><span class="recipe-field-title">Nutrition</span></a></li>
            </ul>
        </nav>


        <div id="{{ id ~ "tab-recipe" }}">
            {{ forms.textField({
                id: id ~ 'name',
                class: 'nicetext',
                name: name ~ '[name]',
                label: 'Recipe Name' |t,
                instructions: 'Enter the name of this recipe' |t,
                value: value.name,
                errors: value.getErrors('name'),
                required: true,
            }) }}

            {{ forms.textareaField({
                id: id ~ 'description',
                class: 'nicetext',
                name: name ~ '[description]',
                label: 'Recipe Description' |t,
                instructions: 'Enter a description of this recipe' |t,
                value: value.description,
                errors: value.getErrors('description'),
                required: false,
            }) }}

            {{ forms.textField({
                id: id ~ 'serves',
                type: 'number',
                class: 'nicetext',
                size: 3,
                name: name ~ '[serves]',
                label: 'Recipe Serves' |t,
                instructions: 'Enter how many people this recipe serves' |t,
                value: value.serves,
                errors: value.getErrors('serves'),
                required: true,
            }) }}

            {{ forms.editableTableField({
                id: id ~ 'ingredients',
                name: name ~ '[ingredients]',
                label: 'Recipe Ingredients' |t,
                instructions: "Enter the ingredients needed for this recipe by clicking on 'Add an Ingredient'.  The quantity should be in decimal form." |t,
                required: false,
                static: false,
                cols: {
                    ingredient: {
                        heading: "Ingredient" |t,
                        type: "singleline" |t,
                        width: '75%',
                    },
                },
                rows: value.ingredients,
                addRowLabel: "Add an Ingredient" |t,
            }) }}

            {{ forms.editableTableField({
                id: id ~ 'directions',
                name: name ~ '[directions]',
                label: 'Recipe Directions' |t,
                instructions: "Enter the directions for this recipe by clicking on 'Add a Direction'." |t,
                required: false,
                static: false,
                cols: {
                    direction: {
                        heading: "Direction" |t,
                        type: "multiline" |t,
                    },
                },
                rows: value.directions,
                addRowLabel: "Add a Direction" |t,
            }) }}

            {{ forms.textField({
                id: id ~ 'prepTime',
                type: 'number',
                class: 'nicetext',
                name: name ~ '[prepTime]',
                size: 3,
                label: 'Recipe Prep Time' |t,
                instructions: 'The number of minutes it takes to prep this recipe' |t,
                value: value.prepTime,
                errors: value.getErrors('prepTime'),
                required: false,
            }) }}

            {{ forms.textField({
                id: id ~ 'cookTime',
                type: 'number',
                class: 'nicetext',
                size: 3,
                name: name ~ '[cookTime]',
                label: 'Recipe Cook Time' |t,
                instructions: 'The number of minutes it takes to cook this recipe' |t,
                value: value.cookTime,
                errors: value.getErrors('cookTime'),
                required: false,
            }) }}

            {{ forms.textField({
                id: id ~ 'totalTime',
                type: 'number',
                class: 'nicetext',
                size: 3,
                name: name ~ '[totalTime]',
                label: 'Recipe Total Time' |t,
                instructions: 'The number of minutes it takes for this entire recipe' |t,
                value: value.totalTime,
                errors: value.getErrors('totalTime'),
                required: false,
            }) }}
            </div>

        <div id="{{ id ~ "tab-health" }}" class="hidden">

            {{ forms.textField({
                id: id ~ 'servingSize',
                class: 'nicetext',
                name: name ~ '[servingSize]',
                label: 'Recipe Serving Size' |t,
                instructions: 'The serving size, in terms of the number of volume or mass' |t,
                value: value.servingSize,
                errors: value.getErrors('servingSize'),
                required: false,
            }) }}

            {{ forms.textField({
                id: id ~ 'calories',
                class: 'nicetext',
                name: name ~ '[calories]',
                label: 'Recipe Calories' |t,
                instructions: 'The number of calories per serving' |t,
                value: value.calories,
                errors: value.getErrors('calories'),
                required: false,
            }) }}

            {{ forms.textField({
                id: id ~ 'carbohydrateContent',
                class: 'nicetext',
                name: name ~ '[carbohydrateContent]',
                label: 'Recipe Carbohydrate Content' |t,
                instructions: 'The number of grams of carbohydrates per serving' |t,
                value: value.carbohydrateContent,
                errors: value.getErrors('carbohydrateContent'),
                required: false,
            }) }}

            {{ forms.textField({
                id: id ~ 'cholesterolContent',
                class: 'nicetext',
                name: name ~ '[cholesterolContent]',
                label: 'Recipe Cholesterol Content' |t,
                instructions: 'The number of milligrams of cholesterol per serving' |t,
                value: value.cholesterolContent,
                errors: value.getErrors('cholesterolContent'),
                required: false,
            }) }}

            {{ forms.textField({
                id: id ~ 'fatContent',
                class: 'nicetext',
                name: name ~ '[fatContent]',
                label: 'Recipe Fat Content' |t,
                instructions: 'The number of grams of fat per serving' |t,
                value: value.fatContent,
                errors: value.getErrors('fatContent'),
                required: false,
            }) }}

            {{ forms.textField({
                id: id ~ 'fiberContent',
                class: 'nicetext',
                name: name ~ '[fiberContent]',
                label: 'Recipe Fiber Content' |t,
                instructions: 'The number of grams of fiber per serving' |t,
                value: value.fiberContent,
                errors: value.getErrors('fiberContent'),
                required: false,
            }) }}

            {{ forms.textField({
                id: id ~ 'proteinContent',
                class: 'nicetext',
                name: name ~ '[proteinContent]',
                label: 'Recipe Protein Content' |t,
                instructions: 'The number of grams of protein per serving' |t,
                value: value.proteinContent,
                errors: value.getErrors('proteinContent'),
                required: false,
            }) }}

            {{ forms.textField({
                id: id ~ 'saturatedFatContent',
                class: 'nicetext',
                name: name ~ '[saturatedFatContent]',
                label: 'Recipe Saturated Fat Content' |t,
                instructions: 'The number of grams of saturated fat per serving' |t,
                value: value.saturatedFatContent,
                errors: value.getErrors('saturatedFatContent'),
                required: false,
            }) }}

            {{ forms.textField({
                id: id ~ 'sodiumContent',
                class: 'nicetext',
                name: name ~ '[sodiumContent]',
                label: 'Recipe Sodium Content' |t,
                instructions: 'The number of milligrams of sodium per serving' |t,
                value: value.sodiumContent,
                errors: value.getErrors('sodiumContent'),
                required: false,
            }) }}

            {{ forms.textField({
                id: id ~ 'sugarContent',
                class: 'nicetext',
                name: name ~ '[sugarContent]',
                label: 'Recipe Sugar Content' |t,
                instructions: 'The number of grams of sugar per serving' |t,
                value: value.sugarContent,
                errors: value.getErrors('sugarContent'),
                required: false,
            }) }}

            {{ forms.textField({
                id: id ~ 'transFatContent',
                class: 'nicetext',
                name: name ~ '[transFatContent]',
                label: 'Recipe Trans Fat Content' |t,
                instructions: 'The number of grams of trans fat per serving' |t,
                value: value.transFatContent,
                errors: value.getErrors('transFatContent'),
                required: false,
            }) }}

            {{ forms.textField({
                id: id ~ 'unsaturatedFatContent',
                class: 'nicetext',
                name: name ~ '[unsaturatedFatContent]',
                label: 'Recipe Unsaturated Fat Content' |t,
                instructions: 'The number of grams of unsaturated fat per serving' |t,
                value: value.unsaturatedFatContent,
                errors: value.getErrors('unsaturatedFatContent'),
                required: false,
            }) }}

        </div>
    </div>
</div>

{% js %}
    $(function () {
        $('#fields-{{ id ~ 'tabs-recipe' }}').on('click', function (e) {
            e.preventDefault();

            $('#{{ prefix ~ id ~ 'tab-recipe' }}').removeClass('hidden');
            $('#{{ prefix ~ id ~ 'tab-health' }}').addClass('hidden');

            $('#fields-{{ id ~ 'tabs-recipe' }}').addClass('sel');
            $('#fields-{{ id ~ 'tabs-health' }}').removeClass('sel');
        });

        $('#fields-{{ id ~ 'tabs-health' }}').on('click', function (e) {
            e.preventDefault();
            $('#{{ prefix ~ id ~ 'tab-recipe' }}').addClass('hidden');
            $('#{{ prefix ~ id ~ 'tab-health' }}').removeClass('hidden');

            $('#fields-{{ id ~ 'tabs-recipe' }}').removeClass('sel');
            $('#fields-{{ id ~ 'tabs-health' }}').addClass('sel');
        });
    });

    $('form').attr('novalidate', 'novalidate');
{% endjs %}

<style>
    .customtabs {margin-bottom:30px;position: relative;z-index: 1;box-shadow: inset 0 -1px 0 #e3e5e8;min-height: 40px;overflow: hidden;}.customtabs ul {display: flex;flex-direction: row;width: calc(100% + 1px);}.customtabs ul li {box-sizing: border-box;}body.ltr .customtabs ul li {border-right: 1px solid rgba(0, 0, 20, 0.1);}body.rtl .customtabs ul li {border-left: 1px solid rgba(0, 0, 20, 0.1);}.customtabs ul li a {position: relative;display: block;padding: 10px 24px;white-space: nowrap;overflow: hidden;}.customtabs ul li a:after {content: '.';font-size: 0;display: block;position: absolute;top: 0;width: 24px;height: calc(100% - 1px);}body.ltr .customtabs ul li a:after {right: 0;}body.rtl .customtabs ul li a:after {left: 0;}body.ltr .customtabs ul li a:after {background: linear-gradient(to right, rgba(235, 237, 239, 0), #ebedef 17px);}body.rtl .customtabs ul li a:after {background: linear-gradient(to left, rgba(235, 237, 239, 0), #ebedef 17px);}.customtabs ul li a:hover {text-decoration: none;}.customtabs ul li a:not(.sel) {color: #576575;}.customtabs ul li a:not(.sel):hover {color: #0d78f2;}.customtabs ul li a.sel {color: #29323d;background: #fff;padding-bottom: 10px;cursor: default;}body.ltr .customtabs ul li a.sel:after {background: linear-gradient(to right, rgba(255, 255, 255, 0), #fff 17px);}body.rtl .customtabs ul li a.sel:after {background: linear-gradient(to left, rgba(255, 255, 255, 0), #fff 17px);}
</style>
